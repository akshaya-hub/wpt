<dialog id="anchor" class="top-layer"></dialog>
<dialog id="target" class="top-layer"></dialog>

<script>
target.showModal();
anchor.showModal();
document.scrollingElement.scrollTop = 100;

// Get all elements in the top layer set
const topLayerElements = document.querySelectorAll('.top-layer');

// Convert NodeList to array and sort by y position
const topLayerElementsArray = Array.from(topLayerElements);
topLayerElementsArray.sort((a, b) => a.getBoundingClientRect().y - b.getBoundingClientRect().y);

// Get the index of each element in the sorted array
const topLayerElementOrder = topLayerElementsArray.map(el => topLayerElementsArray.indexOf(el));

console.log(topLayerElementOrder);
</script>

<style>
#anchor {
  position: absolute;
  top: 300px;
  left: 200px;
  width: 100px;
  height: 100px;
  background: orange;
  anchor-name: --a;
}

#target {
  position: fixed;
  top: anchor(--a bottom, 200px);
  left: anchor(--a left, 300px);
  width: 100px;
  height: 100px;
  background: lime;
  anchor-scroll: --a;
}

body {
  margin: 0;
  height: 300vh;
}

dialog {
  margin: 0;
  border: 0;
  padding: 0;
  outline: none;
}

dialog::backdrop {
  background: transparent;
}
</style>
